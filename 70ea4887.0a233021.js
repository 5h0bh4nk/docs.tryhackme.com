(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{74:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return l}));var r=n(2),o=n(6),a=(n(0),n(99)),s={id:"api-endpoints",title:"API Endpoints",sidebar_label:"API Endpoints"},i={unversionedId:"api-docs/api-endpoints",id:"api-docs/api-endpoints",isDocsHomePage:!1,title:"API Endpoints",description:"Authentication/Registering Users",source:"@site/docs/api-docs/api-endpoints.md",slug:"/api-docs/api-endpoints",permalink:"/docs/api-docs/api-endpoints",editUrl:"https://github.com/tryhackmeltd/docs.tryhackme.com/edit/master/docs/api-docs/api-endpoints.md",version:"current",lastUpdatedBy:"Ben Spring",lastUpdatedAt:1616173077,sidebar_label:"API Endpoints",sidebar:"docs",previous:{title:"Introduction",permalink:"/docs/api-docs/introduction"}},c=[{value:"Authentication/Registering Users",id:"authenticationregistering-users",children:[]},{value:"Retrieve User Progress",id:"retrieve-user-progress",children:[]},{value:"Retrieving Users",id:"retrieving-users",children:[]},{value:"Remove Users From Room",id:"remove-users-from-room",children:[]},{value:"Retrieve Rooms",id:"retrieve-rooms",children:[]},{value:"Check If Room Exists",id:"check-if-room-exists",children:[]},{value:"Room Questions",id:"room-questions",children:[]},{value:"Status Codes &amp; Error Handling",id:"status-codes--error-handling",children:[]}],p={rightToc:c};function l(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"authenticationregistering-users"},"Authentication/Registering Users"),Object(a.b)("p",null,"When you want a user to launch into a TryHackMe room, you will send a POST request to the URL below. The apiKey parameter is the API key required to authenticate the request. The userId parameter is a unique string used to represent your user and the roomCode is the code of the room that the user is trying to access. A successful request will return a 200 status code with a URL:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"If the user has not authenticated to TryHackMe through this API endpoint, the URL will point to a unique sign up page that redirects a user to a room after successful registration"),Object(a.b)("li",{parentName:"ul"},"If that user has authenticated to TryHackMe through this API endpoint, the URL will automatically enter a user into a room")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"POST https://tryhackme.com/external/api/authenticate\n")),Object(a.b)("p",null,"The request body parameters are"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"{\n    apiKey: String,\n    userId: String,\n    roomCode: String\n}\n")),Object(a.b)("p",null,"The headers & data encoding are"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"Content-Type: application/x-www-form-urlencoded\n")),Object(a.b)("p",null,"The expected successful response is"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"{\n     url: String\n}\n")),Object(a.b)("h2",{id:"retrieve-user-progress"},"Retrieve User Progress"),Object(a.b)("p",null,"This endpoint returns users progress in the specified room. The {ROOM-CODE} parameter is the room code you would like to receive data from."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"GET https://tryhackme.com/external/api/scoreboard/{ROOM-CODE}\n")),Object(a.b)("p",null,"The API key needs to be provided inside the THM-API-KEY header as follows"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"THM-API-KEY: {API-KEY}\n")),Object(a.b)("p",null,"The expected successful response is"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),'[\n  {\n    "name": "String",\n    "data": [\n      "",\n      0\n    ],\n    "taskData": [\n      {\n        "taskNo": Integer,\n        "questionNo": Integer,\n        "correct": Boolean,\n        "score": Integer,\n        "timeCorrect": "ISO8601 UTC Timestamp"\n      },\n    ],\n    "totalScore": Integer,\n    "rankNo": Integer,\n    "avatar": String,\n    "level": Integer\n  }\n]\n')),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Data will only show for users that are in the room, and that have been created through the ",Object(a.b)("inlineCode",{parentName:"strong"},"/api/external/authenticate")," endpoint. If you've generated a user through this endpoint, they'll also need to sign up and join the room.")),Object(a.b)("h2",{id:"retrieving-users"},"Retrieving Users"),Object(a.b)("p",null,"This endpoint is used to retrieve all the users that have signed up using the API."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"GET https://tryhackme.com/external/api/users\n")),Object(a.b)("p",null,"The API key needs to be provided inside the THM-API-KEY header as follows"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"THM-API-KEY: {API-KEY}\n")),Object(a.b)("p",null,"The expected successful response is as follows"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),'{\n    "status": true,\n    "users": [\n        {\n            "username": String,\n            "email": String,\n            "dateSignedUp": ISO8601 UTC Datetime\n        }\n    ]\n}\n')),Object(a.b)("h2",{id:"remove-users-from-room"},"Remove Users From Room"),Object(a.b)("p",null,"This endpoint is used to remove a user from a room."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"POST https://tryhackme.com/external/api/leaveRoom\n")),Object(a.b)("p",null,"The request body parameters are"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"{\n    apiKey: String,\n    userId: String,\n    roomCode: String\n}\n")),Object(a.b)("p",null,"The headers & data encoding are"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"Content-Type: application/x-www-form-urlencoded\n")),Object(a.b)("p",null,"The expected successful response is as follows"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"{}\n")),Object(a.b)("h2",{id:"retrieve-rooms"},"Retrieve Rooms"),Object(a.b)("p",null,"This endpoint is used to retrieve details of public and the user's private rooms on the platform. The users field is only returned for a room that owned/managed by the API user."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"GET https://tryhackme.com/external/api/rooms\n")),Object(a.b)("p",null,"The API key needs to be provided inside the THM-API-KEY header as follows"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"THM-API-KEY: {API-KEY}\n")),Object(a.b)("p",null,"The expected successful response is as follows"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),'[\n    {\n        "code": String,\n        "title": String,\n        "description": String\n        \'public\': Boolean\n        \'users\': [String]\n    },\n]\n')),Object(a.b)("h2",{id:"check-if-room-exists"},"Check If Room Exists"),Object(a.b)("p",null,"This endpoint is used to check if a room exists on the platform using the {ROOM-CODE} as a URL parameter.."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"GET https://tryhackme.com/external/api/roomExists/{ROOM-CODE}\n")),Object(a.b)("p",null,"The API key needs to be provided inside the THM-API-KEY header as follows"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"THM-API-KEY: {API-KEY}\n")),Object(a.b)("p",null,"The expected successful response is as follows"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),'{\n    "roomExists": Boolean\n}\n')),Object(a.b)("h2",{id:"room-questions"},"Room Questions"),Object(a.b)("p",null,"This endpoint is used to retrieve questions associated with a {ROOM-CODE}. This endpoint retrieves questions associated with public rooms and private rooms owned by the API user."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"GET https://tryhackme.com/external/api/questions/{ROOM-CODE}\n")),Object(a.b)("p",null,"The API key needs to be provided inside the THM-API-KEY header as follows"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"THM-API-KEY: {API-KEY}\n")),Object(a.b)("p",null,"The expected successful response is as follows"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),'{\n    "questions": [\n        {\n            "taskNo": Integer,\n            "infoList": [\n                {\n                    "questionNo": Integer,\n                    "question": String,\n                    "answer": String,\n                    "hint": String,\n                    "extraPoints": Integer\n                }\n            ]\n        }\n}\n')),Object(a.b)("h2",{id:"status-codes--error-handling"},"Status Codes & Error Handling"),Object(a.b)("p",null,"A successful request to any of these endpoints will always return a 200 OK response."),Object(a.b)("p",null,"A request to an endpoint that does not return a 200 OK response will contain a message parameter attached to the response as follows"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),'{\n    message: "API Key is invalid or has expired."\n}\n')))}l.isMDXComponent=!0},99:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return O}));var r=n(0),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=o.a.createContext({}),l=function(e){var t=o.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return o.a.createElement(p.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=l(n),d=r,O=u["".concat(s,".").concat(d)]||u[d]||b[d]||a;return n?o.a.createElement(O,i(i({ref:t},p),{},{components:n})):o.a.createElement(O,i({ref:t},p))}));function O(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var p=2;p<a;p++)s[p]=n[p];return o.a.createElement.apply(null,s)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);